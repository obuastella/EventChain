import{S as Un,a as Dn,b as X,c as F,r as O,C as ai,R as kn,W as zn,g as kr,V as zr,T as yt,d as xe,e as li,f as me,h as Te,i as hn,P as xn,B as ci,j as H,k as xr,l as bt,m as Xe,n as jr,o as gn,p as ue,q as wn,s as ui,t as di,u as fi,v as De,w as Ke,x as qe,y as hi,z as qn}from"./index-CVRWsBtV.js";function gi(r){return Un in r.features&&Dn in r.features&&(X in r.features||F in r.features)}const Fr=O.createContext({});function wi(){return O.useContext(Fr)}const Ls=({children:r,endpoint:n,config:e={commitment:"confirmed"}})=>{const t=O.useMemo(()=>new ai(n,e),[n,e]);return kn.createElement(Fr.Provider,{value:{connection:t}},r)};class Vn extends zn{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const mi=[],Mt={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){ne("call","select")},connect(){return Promise.reject(ne("call","connect"))},disconnect(){return Promise.reject(ne("call","disconnect"))},sendTransaction(){return Promise.reject(ne("call","sendTransaction"))},signTransaction(){return Promise.reject(ne("call","signTransaction"))},signAllTransactions(){return Promise.reject(ne("call","signAllTransactions"))},signMessage(){return Promise.reject(ne("call","signMessage"))},signIn(){return Promise.reject(ne("call","signIn"))}};Object.defineProperty(Mt,"wallets",{get(){return ne("read","wallets"),mi}});Object.defineProperty(Mt,"wallet",{get(){return ne("read","wallet"),null}});Object.defineProperty(Mt,"publicKey",{get(){return ne("read","publicKey"),null}});function ne(r,n){const e=new Error(`You have tried to ${r} "${n}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(e),e}const Kr=O.createContext(Mt);function pi(){return O.useContext(Kr)}function Os(){const{publicKey:r,signTransaction:n,signAllTransactions:e}=pi();return O.useMemo(()=>r&&n&&e?{publicKey:r,signTransaction:n,signAllTransactions:e}:void 0,[r,n,e])}function yi(r,n){const e=O.useState(()=>{try{const o=localStorage.getItem(r);if(o)return JSON.parse(o)}catch(o){typeof window<"u"&&console.error(o)}return n}),t=e[0],i=O.useRef(!0);return O.useEffect(()=>{if(i.current){i.current=!1;return}try{t===null?localStorage.removeItem(r):localStorage.setItem(r,JSON.stringify(t))}catch(o){typeof window<"u"&&console.error(o)}},[t,r]),e}var Ie={},It,$n;function bi(){return $n||($n=1,It=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),It}var Nt={},he={},Hn;function Ce(){if(Hn)return he;Hn=1;let r;const n=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return he.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17},he.getSymbolTotalCodewords=function(t){return n[t]},he.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t},he.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');r=t},he.isKanjiModeEnabled=function(){return typeof r<"u"},he.toSJIS=function(t){return r(t)},he}var Lt={},Gn;function jn(){return Gn||(Gn=1,function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function n(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+e)}}r.isValid=function(t){return t&&typeof t.bit<"u"&&t.bit>=0&&t.bit<4},r.from=function(t,i){if(r.isValid(t))return t;try{return n(t)}catch{return i}}}(Lt)),Lt}var Ot,Yn;function vi(){if(Yn)return Ot;Yn=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(n){const e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}},Ot=r,Ot}var Bt,Jn;function Ei(){if(Jn)return Bt;Jn=1;function r(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}return r.prototype.set=function(n,e,t,i){const o=n*this.size+e;this.data[o]=t,i&&(this.reservedBit[o]=!0)},r.prototype.get=function(n,e){return this.data[n*this.size+e]},r.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t},r.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]},Bt=r,Bt}var Pt={},Qn;function _i(){return Qn||(Qn=1,function(r){const n=Ce().getSymbolSize;r.getRowColCoords=function(t){if(t===1)return[];const i=Math.floor(t/7)+2,o=n(t),s=o===145?26:Math.ceil((o-13)/(2*i-2))*2,a=[o-7];for(let l=1;l<i-1;l++)a[l]=a[l-1]-s;return a.push(6),a.reverse()},r.getPositions=function(t){const i=[],o=r.getRowColCoords(t),s=o.length;for(let a=0;a<s;a++)for(let l=0;l<s;l++)a===0&&l===0||a===0&&l===s-1||a===s-1&&l===0||i.push([o[a],o[l]]);return i}}(Pt)),Pt}var Ut={},Zn;function Si(){if(Zn)return Ut;Zn=1;const r=Ce().getSymbolSize,n=7;return Ut.getPositions=function(t){const i=r(t);return[[0,0],[i-n,0],[0,i-n]]},Ut}var Dt={},Xn;function Ai(){return Xn||(Xn=1,function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n={N1:3,N2:3,N3:40,N4:10};r.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},r.from=function(i){return r.isValid(i)?parseInt(i,10):void 0},r.getPenaltyN1=function(i){const o=i.size;let s=0,a=0,l=0,c=null,u=null;for(let h=0;h<o;h++){a=l=0,c=u=null;for(let p=0;p<o;p++){let v=i.get(h,p);v===c?a++:(a>=5&&(s+=n.N1+(a-5)),c=v,a=1),v=i.get(p,h),v===u?l++:(l>=5&&(s+=n.N1+(l-5)),u=v,l=1)}a>=5&&(s+=n.N1+(a-5)),l>=5&&(s+=n.N1+(l-5))}return s},r.getPenaltyN2=function(i){const o=i.size;let s=0;for(let a=0;a<o-1;a++)for(let l=0;l<o-1;l++){const c=i.get(a,l)+i.get(a,l+1)+i.get(a+1,l)+i.get(a+1,l+1);(c===4||c===0)&&s++}return s*n.N2},r.getPenaltyN3=function(i){const o=i.size;let s=0,a=0,l=0;for(let c=0;c<o;c++){a=l=0;for(let u=0;u<o;u++)a=a<<1&2047|i.get(c,u),u>=10&&(a===1488||a===93)&&s++,l=l<<1&2047|i.get(u,c),u>=10&&(l===1488||l===93)&&s++}return s*n.N3},r.getPenaltyN4=function(i){let o=0;const s=i.data.length;for(let l=0;l<s;l++)o+=i.data[l];return Math.abs(Math.ceil(o*100/s/5)-10)*n.N4};function e(t,i,o){switch(t){case r.Patterns.PATTERN000:return(i+o)%2===0;case r.Patterns.PATTERN001:return i%2===0;case r.Patterns.PATTERN010:return o%3===0;case r.Patterns.PATTERN011:return(i+o)%3===0;case r.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(o/3))%2===0;case r.Patterns.PATTERN101:return i*o%2+i*o%3===0;case r.Patterns.PATTERN110:return(i*o%2+i*o%3)%2===0;case r.Patterns.PATTERN111:return(i*o%3+(i+o)%2)%2===0;default:throw new Error("bad maskPattern:"+t)}}r.applyMask=function(i,o){const s=o.size;for(let a=0;a<s;a++)for(let l=0;l<s;l++)o.isReserved(l,a)||o.xor(l,a,e(i,l,a))},r.getBestMask=function(i,o){const s=Object.keys(r.Patterns).length;let a=0,l=1/0;for(let c=0;c<s;c++){o(c),r.applyMask(c,i);const u=r.getPenaltyN1(i)+r.getPenaltyN2(i)+r.getPenaltyN3(i)+r.getPenaltyN4(i);r.applyMask(c,i),u<l&&(l=u,a=c)}return a}}(Dt)),Dt}var tt={},er;function qr(){if(er)return tt;er=1;const r=jn(),n=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],e=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return tt.getBlocksCount=function(i,o){switch(o){case r.L:return n[(i-1)*4+0];case r.M:return n[(i-1)*4+1];case r.Q:return n[(i-1)*4+2];case r.H:return n[(i-1)*4+3];default:return}},tt.getTotalCodewordsCount=function(i,o){switch(o){case r.L:return e[(i-1)*4+0];case r.M:return e[(i-1)*4+1];case r.Q:return e[(i-1)*4+2];case r.H:return e[(i-1)*4+3];default:return}},tt}var kt={},je={},tr;function Mi(){if(tr)return je;tr=1;const r=new Uint8Array(512),n=new Uint8Array(256);return function(){let t=1;for(let i=0;i<255;i++)r[i]=t,n[t]=i,t<<=1,t&256&&(t^=285);for(let i=255;i<512;i++)r[i]=r[i-255]}(),je.log=function(t){if(t<1)throw new Error("log("+t+")");return n[t]},je.exp=function(t){return r[t]},je.mul=function(t,i){return t===0||i===0?0:r[n[t]+n[i]]},je}var nr;function Ti(){return nr||(nr=1,function(r){const n=Mi();r.mul=function(t,i){const o=new Uint8Array(t.length+i.length-1);for(let s=0;s<t.length;s++)for(let a=0;a<i.length;a++)o[s+a]^=n.mul(t[s],i[a]);return o},r.mod=function(t,i){let o=new Uint8Array(t);for(;o.length-i.length>=0;){const s=o[0];for(let l=0;l<i.length;l++)o[l]^=n.mul(i[l],s);let a=0;for(;a<o.length&&o[a]===0;)a++;o=o.slice(a)}return o},r.generateECPolynomial=function(t){let i=new Uint8Array([1]);for(let o=0;o<t;o++)i=r.mul(i,new Uint8Array([1,n.exp(o)]));return i}}(kt)),kt}var zt,rr;function Ci(){if(rr)return zt;rr=1;const r=Ti();function n(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}return n.prototype.initialize=function(t){this.degree=t,this.genPoly=r.generateECPolynomial(this.degree)},n.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(t.length+this.degree);i.set(t);const o=r.mod(i,this.genPoly),s=this.degree-o.length;if(s>0){const a=new Uint8Array(this.degree);return a.set(o,s),a}return o},zt=n,zt}var xt={},jt={},Ft={},ir;function Vr(){return ir||(ir=1,Ft.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40}),Ft}var ie={},or;function $r(){if(or)return ie;or=1;const r="[0-9]+",n="[A-Z $%*+\\-./:]+";let e="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";e=e.replace(/u/g,"\\u");const t="(?:(?![A-Z0-9 $%*+\\-./:]|"+e+`)(?:.|[\r
]))+`;ie.KANJI=new RegExp(e,"g"),ie.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ie.BYTE=new RegExp(t,"g"),ie.NUMERIC=new RegExp(r,"g"),ie.ALPHANUMERIC=new RegExp(n,"g");const i=new RegExp("^"+e+"$"),o=new RegExp("^"+r+"$"),s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return ie.testKanji=function(l){return i.test(l)},ie.testNumeric=function(l){return o.test(l)},ie.testAlphanumeric=function(l){return s.test(l)},ie}var sr;function Re(){return sr||(sr=1,function(r){const n=Vr(),e=$r();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(o,s){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!n.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?o.ccBits[0]:s<27?o.ccBits[1]:o.ccBits[2]},r.getBestModeForData=function(o){return e.testNumeric(o)?r.NUMERIC:e.testAlphanumeric(o)?r.ALPHANUMERIC:e.testKanji(o)?r.KANJI:r.BYTE},r.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},r.isValid=function(o){return o&&o.bit&&o.ccBits};function t(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+i)}}r.from=function(o,s){if(r.isValid(o))return o;try{return t(o)}catch{return s}}}(jt)),jt}var ar;function Ri(){return ar||(ar=1,function(r){const n=Ce(),e=qr(),t=jn(),i=Re(),o=Vr(),s=7973,a=n.getBCHDigit(s);function l(p,v,g){for(let E=1;E<=40;E++)if(v<=r.getCapacity(E,g,p))return E}function c(p,v){return i.getCharCountIndicator(p,v)+4}function u(p,v){let g=0;return p.forEach(function(E){const N=c(E.mode,v);g+=N+E.getBitsLength()}),g}function h(p,v){for(let g=1;g<=40;g++)if(u(p,g)<=r.getCapacity(g,v,i.MIXED))return g}r.from=function(v,g){return o.isValid(v)?parseInt(v,10):g},r.getCapacity=function(v,g,E){if(!o.isValid(v))throw new Error("Invalid QR Code version");typeof E>"u"&&(E=i.BYTE);const N=n.getSymbolTotalCodewords(v),S=e.getTotalCodewordsCount(v,g),m=(N-S)*8;if(E===i.MIXED)return m;const b=m-c(E,v);switch(E){case i.NUMERIC:return Math.floor(b/10*3);case i.ALPHANUMERIC:return Math.floor(b/11*2);case i.KANJI:return Math.floor(b/13);case i.BYTE:default:return Math.floor(b/8)}},r.getBestVersionForData=function(v,g){let E;const N=t.from(g,t.M);if(Array.isArray(v)){if(v.length>1)return h(v,N);if(v.length===0)return 1;E=v[0]}else E=v;return l(E.mode,E.getLength(),N)},r.getEncodedBits=function(v){if(!o.isValid(v)||v<7)throw new Error("Invalid QR Code version");let g=v<<12;for(;n.getBCHDigit(g)-a>=0;)g^=s<<n.getBCHDigit(g)-a;return v<<12|g}}(xt)),xt}var Kt={},lr;function Wi(){if(lr)return Kt;lr=1;const r=Ce(),n=1335,e=21522,t=r.getBCHDigit(n);return Kt.getEncodedBits=function(o,s){const a=o.bit<<3|s;let l=a<<10;for(;r.getBCHDigit(l)-t>=0;)l^=n<<r.getBCHDigit(l)-t;return(a<<10|l)^e},Kt}var qt={},Vt,cr;function Ii(){if(cr)return Vt;cr=1;const r=Re();function n(e){this.mode=r.NUMERIC,this.data=e.toString()}return n.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(t){let i,o,s;for(i=0;i+3<=this.data.length;i+=3)o=this.data.substr(i,3),s=parseInt(o,10),t.put(s,10);const a=this.data.length-i;a>0&&(o=this.data.substr(i),s=parseInt(o,10),t.put(s,a*3+1))},Vt=n,Vt}var $t,ur;function Ni(){if(ur)return $t;ur=1;const r=Re(),n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function e(t){this.mode=r.ALPHANUMERIC,this.data=t}return e.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(i){let o;for(o=0;o+2<=this.data.length;o+=2){let s=n.indexOf(this.data[o])*45;s+=n.indexOf(this.data[o+1]),i.put(s,11)}this.data.length%2&&i.put(n.indexOf(this.data[o]),6)},$t=e,$t}var Ht,dr;function Li(){if(dr)return Ht;dr=1;const r=Re();function n(e){this.mode=r.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}return n.getBitsLength=function(t){return t*8},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){for(let t=0,i=this.data.length;t<i;t++)e.put(this.data[t],8)},Ht=n,Ht}var Gt,fr;function Oi(){if(fr)return Gt;fr=1;const r=Re(),n=Ce();function e(t){this.mode=r.KANJI,this.data=t}return e.getBitsLength=function(i){return i*13},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){let i;for(i=0;i<this.data.length;i++){let o=n.toSJIS(this.data[i]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),t.put(o,13)}},Gt=e,Gt}var Yt={exports:{}},hr;function Bi(){return hr||(hr=1,function(r){var n={single_source_shortest_paths:function(e,t,i){var o={},s={};s[t]=0;var a=n.PriorityQueue.make();a.push(t,0);for(var l,c,u,h,p,v,g,E,N;!a.empty();){l=a.pop(),c=l.value,h=l.cost,p=e[c]||{};for(u in p)p.hasOwnProperty(u)&&(v=p[u],g=h+v,E=s[u],N=typeof s[u]>"u",(N||E>g)&&(s[u]=g,a.push(u,g),o[u]=c))}if(typeof i<"u"&&typeof s[i]>"u"){var S=["Could not find a path from ",t," to ",i,"."].join("");throw new Error(S)}return o},extract_shortest_path_from_predecessor_list:function(e,t){for(var i=[],o=t;o;)i.push(o),e[o],o=e[o];return i.reverse(),i},find_path:function(e,t,i){var o=n.single_source_shortest_paths(e,t,i);return n.extract_shortest_path_from_predecessor_list(o,i)},PriorityQueue:{make:function(e){var t=n.PriorityQueue,i={},o;e=e||{};for(o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);return i.queue=[],i.sorter=e.sorter||t.default_sorter,i},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var i={value:e,cost:t};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=n}(Yt)),Yt.exports}var gr;function Pi(){return gr||(gr=1,function(r){const n=Re(),e=Ii(),t=Ni(),i=Li(),o=Oi(),s=$r(),a=Ce(),l=Bi();function c(S){return unescape(encodeURIComponent(S)).length}function u(S,m,b){const A=[];let M;for(;(M=S.exec(b))!==null;)A.push({data:M[0],index:M.index,mode:m,length:M[0].length});return A}function h(S){const m=u(s.NUMERIC,n.NUMERIC,S),b=u(s.ALPHANUMERIC,n.ALPHANUMERIC,S);let A,M;return a.isKanjiModeEnabled()?(A=u(s.BYTE,n.BYTE,S),M=u(s.KANJI,n.KANJI,S)):(A=u(s.BYTE_KANJI,n.BYTE,S),M=[]),m.concat(b,A,M).sort(function(_,w){return _.index-w.index}).map(function(_){return{data:_.data,mode:_.mode,length:_.length}})}function p(S,m){switch(m){case n.NUMERIC:return e.getBitsLength(S);case n.ALPHANUMERIC:return t.getBitsLength(S);case n.KANJI:return o.getBitsLength(S);case n.BYTE:return i.getBitsLength(S)}}function v(S){return S.reduce(function(m,b){const A=m.length-1>=0?m[m.length-1]:null;return A&&A.mode===b.mode?(m[m.length-1].data+=b.data,m):(m.push(b),m)},[])}function g(S){const m=[];for(let b=0;b<S.length;b++){const A=S[b];switch(A.mode){case n.NUMERIC:m.push([A,{data:A.data,mode:n.ALPHANUMERIC,length:A.length},{data:A.data,mode:n.BYTE,length:A.length}]);break;case n.ALPHANUMERIC:m.push([A,{data:A.data,mode:n.BYTE,length:A.length}]);break;case n.KANJI:m.push([A,{data:A.data,mode:n.BYTE,length:c(A.data)}]);break;case n.BYTE:m.push([{data:A.data,mode:n.BYTE,length:c(A.data)}])}}return m}function E(S,m){const b={},A={start:{}};let M=["start"];for(let f=0;f<S.length;f++){const _=S[f],w=[];for(let y=0;y<_.length;y++){const W=_[y],I=""+f+y;w.push(I),b[I]={node:W,lastCount:0},A[I]={};for(let C=0;C<M.length;C++){const R=M[C];b[R]&&b[R].node.mode===W.mode?(A[R][I]=p(b[R].lastCount+W.length,W.mode)-p(b[R].lastCount,W.mode),b[R].lastCount+=W.length):(b[R]&&(b[R].lastCount=W.length),A[R][I]=p(W.length,W.mode)+4+n.getCharCountIndicator(W.mode,m))}}M=w}for(let f=0;f<M.length;f++)A[M[f]].end=0;return{map:A,table:b}}function N(S,m){let b;const A=n.getBestModeForData(S);if(b=n.from(m,A),b!==n.BYTE&&b.bit<A.bit)throw new Error('"'+S+'" cannot be encoded with mode '+n.toString(b)+`.
 Suggested mode is: `+n.toString(A));switch(b===n.KANJI&&!a.isKanjiModeEnabled()&&(b=n.BYTE),b){case n.NUMERIC:return new e(S);case n.ALPHANUMERIC:return new t(S);case n.KANJI:return new o(S);case n.BYTE:return new i(S)}}r.fromArray=function(m){return m.reduce(function(b,A){return typeof A=="string"?b.push(N(A,null)):A.data&&b.push(N(A.data,A.mode)),b},[])},r.fromString=function(m,b){const A=h(m,a.isKanjiModeEnabled()),M=g(A),f=E(M,b),_=l.find_path(f.map,"start","end"),w=[];for(let y=1;y<_.length-1;y++)w.push(f.table[_[y]].node);return r.fromArray(v(w))},r.rawSplit=function(m){return r.fromArray(h(m,a.isKanjiModeEnabled()))}}(qt)),qt}var wr;function Ui(){if(wr)return Nt;wr=1;const r=Ce(),n=jn(),e=vi(),t=Ei(),i=_i(),o=Si(),s=Ai(),a=qr(),l=Ci(),c=Ri(),u=Wi(),h=Re(),p=Pi();function v(f,_){const w=f.size,y=o.getPositions(_);for(let W=0;W<y.length;W++){const I=y[W][0],C=y[W][1];for(let R=-1;R<=7;R++)if(!(I+R<=-1||w<=I+R))for(let B=-1;B<=7;B++)C+B<=-1||w<=C+B||(R>=0&&R<=6&&(B===0||B===6)||B>=0&&B<=6&&(R===0||R===6)||R>=2&&R<=4&&B>=2&&B<=4?f.set(I+R,C+B,!0,!0):f.set(I+R,C+B,!1,!0))}}function g(f){const _=f.size;for(let w=8;w<_-8;w++){const y=w%2===0;f.set(w,6,y,!0),f.set(6,w,y,!0)}}function E(f,_){const w=i.getPositions(_);for(let y=0;y<w.length;y++){const W=w[y][0],I=w[y][1];for(let C=-2;C<=2;C++)for(let R=-2;R<=2;R++)C===-2||C===2||R===-2||R===2||C===0&&R===0?f.set(W+C,I+R,!0,!0):f.set(W+C,I+R,!1,!0)}}function N(f,_){const w=f.size,y=c.getEncodedBits(_);let W,I,C;for(let R=0;R<18;R++)W=Math.floor(R/3),I=R%3+w-8-3,C=(y>>R&1)===1,f.set(W,I,C,!0),f.set(I,W,C,!0)}function S(f,_,w){const y=f.size,W=u.getEncodedBits(_,w);let I,C;for(I=0;I<15;I++)C=(W>>I&1)===1,I<6?f.set(I,8,C,!0):I<8?f.set(I+1,8,C,!0):f.set(y-15+I,8,C,!0),I<8?f.set(8,y-I-1,C,!0):I<9?f.set(8,15-I-1+1,C,!0):f.set(8,15-I-1,C,!0);f.set(y-8,8,1,!0)}function m(f,_){const w=f.size;let y=-1,W=w-1,I=7,C=0;for(let R=w-1;R>0;R-=2)for(R===6&&R--;;){for(let B=0;B<2;B++)if(!f.isReserved(W,R-B)){let P=!1;C<_.length&&(P=(_[C]>>>I&1)===1),f.set(W,R-B,P),I--,I===-1&&(C++,I=7)}if(W+=y,W<0||w<=W){W-=y,y=-y;break}}}function b(f,_,w){const y=new e;w.forEach(function(B){y.put(B.mode.bit,4),y.put(B.getLength(),h.getCharCountIndicator(B.mode,f)),B.write(y)});const W=r.getSymbolTotalCodewords(f),I=a.getTotalCodewordsCount(f,_),C=(W-I)*8;for(y.getLengthInBits()+4<=C&&y.put(0,4);y.getLengthInBits()%8!==0;)y.putBit(0);const R=(C-y.getLengthInBits())/8;for(let B=0;B<R;B++)y.put(B%2?17:236,8);return A(y,f,_)}function A(f,_,w){const y=r.getSymbolTotalCodewords(_),W=a.getTotalCodewordsCount(_,w),I=y-W,C=a.getBlocksCount(_,w),R=y%C,B=C-R,P=Math.floor(y/C),U=Math.floor(I/C),z=U+1,J=P-U,re=new l(J);let ye=0;const et=new Array(C),Fn=new Array(C);let Ct=0;const si=new Uint8Array(f.buffer);for(let We=0;We<C;We++){const Wt=We<B?U:z;et[We]=si.slice(ye,ye+Wt),Fn[We]=re.encode(et[We]),ye+=Wt,Ct=Math.max(Ct,Wt)}const Rt=new Uint8Array(y);let Kn=0,oe,se;for(oe=0;oe<Ct;oe++)for(se=0;se<C;se++)oe<et[se].length&&(Rt[Kn++]=et[se][oe]);for(oe=0;oe<J;oe++)for(se=0;se<C;se++)Rt[Kn++]=Fn[se][oe];return Rt}function M(f,_,w,y){let W;if(Array.isArray(f))W=p.fromArray(f);else if(typeof f=="string"){let P=_;if(!P){const U=p.rawSplit(f);P=c.getBestVersionForData(U,w)}W=p.fromString(f,P||40)}else throw new Error("Invalid data");const I=c.getBestVersionForData(W,w);if(!I)throw new Error("The amount of data is too big to be stored in a QR Code");if(!_)_=I;else if(_<I)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+I+`.
`);const C=b(_,w,W),R=r.getSymbolSize(_),B=new t(R);return v(B,_),g(B),E(B,_),S(B,w,0),_>=7&&N(B,_),m(B,C),isNaN(y)&&(y=s.getBestMask(B,S.bind(null,B,w))),s.applyMask(y,B),S(B,w,y),{modules:B,version:_,errorCorrectionLevel:w,maskPattern:y,segments:W}}return Nt.create=function(_,w){if(typeof _>"u"||_==="")throw new Error("No input text");let y=n.M,W,I;return typeof w<"u"&&(y=n.from(w.errorCorrectionLevel,n.M),W=c.from(w.version),I=s.from(w.maskPattern),w.toSJISFunc&&r.setToSJISFunction(w.toSJISFunc)),M(_,W,y,I)},Nt}var Jt={},Qt={},mr;function Hr(){return mr||(mr=1,function(r){function n(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8)throw new Error("Invalid hex color: "+e);(t.length===3||t.length===4)&&(t=Array.prototype.concat.apply([],t.map(function(o){return[o,o]}))),t.length===6&&t.push("F","F");const i=parseInt(t.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+t.slice(0,6).join("")}}r.getOptions=function(t){t||(t={}),t.color||(t.color={});const i=typeof t.margin>"u"||t.margin===null||t.margin<0?4:t.margin,o=t.width&&t.width>=21?t.width:void 0,s=t.scale||4;return{width:o,scale:o?4:s,margin:i,color:{dark:n(t.color.dark||"#000000ff"),light:n(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},r.getScale=function(t,i){return i.width&&i.width>=t+i.margin*2?i.width/(t+i.margin*2):i.scale},r.getImageWidth=function(t,i){const o=r.getScale(t,i);return Math.floor((t+i.margin*2)*o)},r.qrToImageData=function(t,i,o){const s=i.modules.size,a=i.modules.data,l=r.getScale(s,o),c=Math.floor((s+o.margin*2)*l),u=o.margin*l,h=[o.color.light,o.color.dark];for(let p=0;p<c;p++)for(let v=0;v<c;v++){let g=(p*c+v)*4,E=o.color.light;if(p>=u&&v>=u&&p<c-u&&v<c-u){const N=Math.floor((p-u)/l),S=Math.floor((v-u)/l);E=h[a[N*s+S]?1:0]}t[g++]=E.r,t[g++]=E.g,t[g++]=E.b,t[g]=E.a}}}(Qt)),Qt}var pr;function Di(){return pr||(pr=1,function(r){const n=Hr();function e(i,o,s){i.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=s,o.width=s,o.style.height=s+"px",o.style.width=s+"px"}function t(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(o,s,a){let l=a,c=s;typeof l>"u"&&(!s||!s.getContext)&&(l=s,s=void 0),s||(c=t()),l=n.getOptions(l);const u=n.getImageWidth(o.modules.size,l),h=c.getContext("2d"),p=h.createImageData(u,u);return n.qrToImageData(p.data,o,l),e(h,c,u),h.putImageData(p,0,0),c},r.renderToDataURL=function(o,s,a){let l=a;typeof l>"u"&&(!s||!s.getContext)&&(l=s,s=void 0),l||(l={});const c=r.render(o,s,l),u=l.type||"image/png",h=l.rendererOpts||{};return c.toDataURL(u,h.quality)}}(Jt)),Jt}var Zt={},yr;function ki(){if(yr)return Zt;yr=1;const r=Hr();function n(i,o){const s=i.a/255,a=o+'="'+i.hex+'"';return s<1?a+" "+o+'-opacity="'+s.toFixed(2).slice(1)+'"':a}function e(i,o,s){let a=i+o;return typeof s<"u"&&(a+=" "+s),a}function t(i,o,s){let a="",l=0,c=!1,u=0;for(let h=0;h<i.length;h++){const p=Math.floor(h%o),v=Math.floor(h/o);!p&&!c&&(c=!0),i[h]?(u++,h>0&&p>0&&i[h-1]||(a+=c?e("M",p+s,.5+v+s):e("m",l,0),l=0,c=!1),p+1<o&&i[h+1]||(a+=e("h",u),u=0)):l++}return a}return Zt.render=function(o,s,a){const l=r.getOptions(s),c=o.modules.size,u=o.modules.data,h=c+l.margin*2,p=l.color.light.a?"<path "+n(l.color.light,"fill")+' d="M0 0h'+h+"v"+h+'H0z"/>':"",v="<path "+n(l.color.dark,"stroke")+' d="'+t(u,c,l.margin)+'"/>',g='viewBox="0 0 '+h+" "+h+'"',N='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+g+' shape-rendering="crispEdges">'+p+v+`</svg>
`;return typeof a=="function"&&a(null,N),N},Zt}var br;function zi(){if(br)return Ie;br=1;const r=bi(),n=Ui(),e=Di(),t=ki();function i(o,s,a,l,c){const u=[].slice.call(arguments,1),h=u.length,p=typeof u[h-1]=="function";if(!p&&!r())throw new Error("Callback required as last argument");if(p){if(h<2)throw new Error("Too few arguments provided");h===2?(c=a,a=s,s=l=void 0):h===3&&(s.getContext&&typeof c>"u"?(c=l,l=void 0):(c=l,l=a,a=s,s=void 0))}else{if(h<1)throw new Error("Too few arguments provided");return h===1?(a=s,s=l=void 0):h===2&&!s.getContext&&(l=a,a=s,s=void 0),new Promise(function(v,g){try{const E=n.create(a,l);v(o(E,s,l))}catch(E){g(E)}})}try{const v=n.create(a,l);c(null,o(v,s,l))}catch(v){c(v)}}return Ie.create=n.create,Ie.toCanvas=i.bind(null,e.render),Ie.toDataURL=i.bind(null,e.renderToDataURL),Ie.toString=i.bind(null,function(o,s,a){return t.render(o,a)}),Ie}zi();const vt="solana:mainnet",xi="solana:devnet",ji="solana:testnet",Fi="solana:localnet";function Xt(r){switch(r){case"processed":case"confirmed":case"finalized":case void 0:return r;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const Ki="https://api.mainnet-beta.solana.com";function qi(r){return r.includes(Ki)?vt:/\bdevnet\b/i.test(r)?xi:/\btestnet\b/i.test(r)?ji:/\blocalhost\b/i.test(r)||/\b127\.0\.0\.1\b/.test(r)?Fi:vt}function Vi(r){let n=`${r.domain} wants you to sign in with your Solana account:
`;n+=`${r.address}`,r.statement&&(n+=`

${r.statement}`);const e=[];if(r.uri&&e.push(`URI: ${r.uri}`),r.version&&e.push(`Version: ${r.version}`),r.chainId&&e.push(`Chain ID: ${r.chainId}`),r.nonce&&e.push(`Nonce: ${r.nonce}`),r.issuedAt&&e.push(`Issued At: ${r.issuedAt}`),r.expirationTime&&e.push(`Expiration Time: ${r.expirationTime}`),r.notBefore&&e.push(`Not Before: ${r.notBefore}`),r.requestId&&e.push(`Request ID: ${r.requestId}`),r.resources){e.push("Resources:");for(const t of r.resources)e.push(`- ${t}`)}return e.length&&(n+=`

${e.join(`
`)}`),n}const de={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class fe extends Error{constructor(...n){const[e,t,i]=n;super(t),this.code=e,this.data=i,this.name="SolanaMobileWalletAdapterError"}}class Gr extends Error{constructor(...n){const[e,t,i,o]=n;super(i),this.code=t,this.data=o,this.jsonRpcMessageId=e,this.name="SolanaMobileWalletAdapterProtocolError"}}function V(r,n,e,t){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(u){try{c(t.next(u))}catch(h){s(h)}}function l(u){try{c(t.throw(u))}catch(h){s(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((t=t.apply(r,[])).next())})}function $i(r){return window.btoa(r)}function en(r,n){return V(this,void 0,void 0,function*(){const e=yield crypto.subtle.exportKey("raw",r),t=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},n,e),i=new Uint8Array(e.byteLength+t.byteLength);return i.set(new Uint8Array(e),0),i.set(new Uint8Array(t),e.byteLength),i})}function Hi(r){return Vi(r)}function Gi(r){return $i(Hi(r))}const Yi="solana:signTransactions",vr="solana:cloneAuthorization";function Ji(r,n){return new Proxy({},{get(e,t){return t==="then"?null:(e[t]==null&&(e[t]=function(i){return V(this,void 0,void 0,function*(){const{method:o,params:s}=Qi(t,i,r),a=yield n(o,s);return o==="authorize"&&s.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield Xi(s.sign_in_payload,a,n)),Zi(t,a,r)})}),e[t])},defineProperty(){return!1},deleteProperty(){return!1}})}function Qi(r,n,e){let t=n,i=r.toString().replace(/[A-Z]/g,o=>`_${o.toLowerCase()}`).toLowerCase();switch(r){case"authorize":{let{chain:o}=t;if(e==="legacy"){switch(o){case"solana:testnet":{o="testnet";break}case"solana:devnet":{o="devnet";break}case"solana:mainnet":{o="mainnet-beta";break}default:o=t.cluster}t.cluster=o}else{switch(o){case"testnet":case"devnet":{o=`solana:${o}`;break}case"mainnet-beta":{o="solana:mainnet";break}}t.chain=o}}case"reauthorize":{const{auth_token:o,identity:s}=t;if(o)switch(e){case"legacy":{i="reauthorize",t={auth_token:o,identity:s};break}default:{i="authorize";break}}break}}return{method:i,params:t}}function Zi(r,n,e){switch(r){case"getCapabilities":{const t=n;switch(e){case"legacy":{const i=[Yi];return t.supports_clone_authorization===!0&&i.push(vr),Object.assign(Object.assign({},t),{features:i})}case"v1":return Object.assign(Object.assign({},t),{supports_sign_and_send_transactions:!0,supports_clone_authorization:t.features.includes(vr)})}}}return n}function Xi(r,n,e){var t;return V(this,void 0,void 0,function*(){const i=(t=r.domain)!==null&&t!==void 0?t:window.location.host,o=n.accounts[0].address,s=Gi(Object.assign(Object.assign({},r),{domain:i,address:o})),a=yield e("sign_messages",{addresses:[o],payloads:[s]});return{address:o,signed_message:s,signature:a.signed_payloads[0].slice(s.length)}})}const _e=4;function eo(r){if(r>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const n=new ArrayBuffer(_e);return new DataView(n).setUint32(0,r,!1),new Uint8Array(n)}const mn=12,Yr=65;function to(r,n,e){return V(this,void 0,void 0,function*(){const t=eo(n),i=new Uint8Array(mn);crypto.getRandomValues(i);const o=yield crypto.subtle.encrypt(Qr(t,i),e,new TextEncoder().encode(r)),s=new Uint8Array(t.byteLength+i.byteLength+o.byteLength);return s.set(new Uint8Array(t),0),s.set(new Uint8Array(i),t.byteLength),s.set(new Uint8Array(o),t.byteLength+i.byteLength),s})}function Jr(r,n){return V(this,void 0,void 0,function*(){const e=r.slice(0,_e),t=r.slice(_e,_e+mn),i=r.slice(_e+mn),o=yield crypto.subtle.decrypt(Qr(e,t),n,i);return no().decode(o)})}function Qr(r,n){return{additionalData:r,iv:n,name:"AES-GCM",tagLength:128}}let tn;function no(){return tn===void 0&&(tn=new TextDecoder("utf-8")),tn}function ro(){return V(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function nn(){return V(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function io(r){let n="";const e=new Uint8Array(r),t=e.byteLength;for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return window.btoa(n)}function oo(){return Zr(49152+Math.floor(Math.random()*16384))}function Zr(r){if(r<49152||r>65535)throw new fe(de.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${r} given.`,{port:r});return r}function so(r){return r.replace(/[/+=]/g,n=>({"/":"_","+":"-","=":"."})[n])}const ao="solana-wallet";function Er(r){return r.replace(/(^\/+|\/+$)/g,"").split("/")}function lo(r,n){let e=null;if(n){try{e=new URL(n)}catch{}if((e==null?void 0:e.protocol)!=="https:")throw new fe(de.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}e||(e=new URL(`${ao}:/`));const t=r.startsWith("/")?r:[...Er(e.pathname),...Er(r)].join("/");return new URL(t,e)}function co(r,n,e,t=["v1"]){return V(this,void 0,void 0,function*(){const i=Zr(n),o=yield crypto.subtle.exportKey("raw",r),s=io(o),a=lo("v1/associate/local",e);return a.searchParams.set("association",so(s)),a.searchParams.set("port",`${i}`),t.forEach(l=>{a.searchParams.set("v",l)}),a})}function uo(r,n){return V(this,void 0,void 0,function*(){const e=JSON.stringify(r),t=r.id;return to(e,t,n)})}function fo(r,n){return V(this,void 0,void 0,function*(){const e=yield Jr(r,n),t=JSON.parse(e);if(Object.hasOwnProperty.call(t,"error"))throw new Gr(t.id,t.error.code,t.error.message);return t})}function ho(r,n,e){return V(this,void 0,void 0,function*(){const[t,i]=yield Promise.all([crypto.subtle.exportKey("raw",n),crypto.subtle.importKey("raw",r.slice(0,Yr),{name:"ECDH",namedCurve:"P-256"},!1,[])]),o=yield crypto.subtle.deriveBits({name:"ECDH",public:i},e,256),s=yield crypto.subtle.importKey("raw",o,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(t),info:new Uint8Array},s,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function go(r,n){return V(this,void 0,void 0,function*(){const e=yield Jr(r,n),t=JSON.parse(e);let i="legacy";if(Object.hasOwnProperty.call(t,"v"))switch(t.v){case 1:case"1":case"v1":i="v1";break;case"legacy":i="legacy";break;default:throw new fe(de.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${t.v}`)}return{protocol_version:i}})}const Et={Firefox:0,Other:1};function wo(){return navigator.userAgent.indexOf("Firefox/")!==-1?Et.Firefox:Et.Other}function mo(){return new Promise((r,n)=>{function e(){clearTimeout(i),window.removeEventListener("blur",t)}function t(){e(),r()}window.addEventListener("blur",t);const i=setTimeout(()=>{e(),n()},3e3)})}let Fe=null;function po(r){Fe==null&&(Fe=document.createElement("iframe"),Fe.style.display="none",document.body.appendChild(Fe)),Fe.contentWindow.location.href=r.toString()}function yo(r){return V(this,void 0,void 0,function*(){if(r.protocol==="https:")window.location.assign(r);else try{const n=wo();switch(n){case Et.Firefox:po(r);break;case Et.Other:{const e=mo();window.location.assign(r),yield e;break}default:}}catch{throw new fe(de.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function bo(r,n){return V(this,void 0,void 0,function*(){const e=oo(),t=yield co(r,e,n);return yield yo(t),e})}const _r={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},vo="com.solana.mobilewalletadapter.v1";function Eo(){if(typeof window>"u"||window.isSecureContext!==!0)throw new fe(de.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function _o(r){let n;try{n=new URL(r)}catch{throw new fe(de.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(n.protocol!=="https:")throw new fe(de.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function Sr(r){return new DataView(r).getUint32(0,!1)}function So(r,n){return V(this,void 0,void 0,function*(){Eo();const e=yield ro(),i=`ws://localhost:${yield bo(e.publicKey,n==null?void 0:n.baseUri)}/solana-wallet`;let o;const s=(()=>{const u=[..._r.retryDelayScheduleMs];return()=>u.length>1?u.shift():u[0]})();let a=1,l=0,c={__type:"disconnected"};return new Promise((u,h)=>{let p;const v={},g=()=>V(this,void 0,void 0,function*(){if(c.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${c.__type}\`.`);return}p.removeEventListener("open",g);const{associationKeypair:M}=c,f=yield nn();p.send(yield en(f.publicKey,M.privateKey)),c={__type:"hello_req_sent",associationPublicKey:M.publicKey,ecdhPrivateKey:f.privateKey}}),E=M=>{M.wasClean?c={__type:"disconnected"}:h(new fe(de.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${M.code}: ${M.reason}).`,{closeEvent:M})),m()},N=M=>V(this,void 0,void 0,function*(){m(),Date.now()-o>=_r.timeoutMs?h(new fe(de.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${i}.`)):(yield new Promise(f=>{const _=s();b=window.setTimeout(f,_)}),A())}),S=M=>V(this,void 0,void 0,function*(){const f=yield M.data.arrayBuffer();switch(c.__type){case"connecting":if(f.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const _=yield nn();p.send(yield en(_.publicKey,e.privateKey)),c={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:_.privateKey};break;case"connected":try{const w=f.slice(0,_e),y=Sr(w);if(y!==l+1)throw new Error("Encrypted message has invalid sequence number");l=y;const W=yield fo(f,c.sharedSecret),I=v[W.id];delete v[W.id],I.resolve(W.result)}catch(w){if(w instanceof Gr){const y=v[w.jsonRpcMessageId];delete v[w.jsonRpcMessageId],y.reject(w)}else throw w}break;case"hello_req_sent":{if(f.byteLength===0){const C=yield nn();p.send(yield en(C.publicKey,e.privateKey)),c={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:C.privateKey};break}const w=yield ho(f,c.associationPublicKey,c.ecdhPrivateKey),y=f.slice(Yr),W=y.byteLength!==0?yield V(this,void 0,void 0,function*(){const C=y.slice(0,_e),R=Sr(C);if(R!==l+1)throw new Error("Encrypted message has invalid sequence number");return l=R,go(y,w)}):{protocol_version:"legacy"};c={__type:"connected",sharedSecret:w,sessionProperties:W};const I=Ji(W.protocol_version,(C,R)=>V(this,void 0,void 0,function*(){const B=a++;return p.send(yield uo({id:B,jsonrpc:"2.0",method:C,params:R??{}},w)),new Promise((P,U)=>{v[B]={resolve(z){switch(C){case"authorize":case"reauthorize":{const{wallet_uri_base:J}=z;if(J!=null)try{_o(J)}catch(re){U(re);return}break}}P(z)},reject:U}})}));try{u(yield r(I))}catch(C){h(C)}finally{m(),p.close()}break}}});let m,b;const A=()=>{m&&m(),c={__type:"connecting",associationKeypair:e},o===void 0&&(o=Date.now()),p=new WebSocket(i,[vo]),p.addEventListener("open",g),p.addEventListener("close",E),p.addEventListener("error",N),p.addEventListener("message",S),m=()=>{window.clearTimeout(b),p.removeEventListener("open",g),p.removeEventListener("close",E),p.removeEventListener("error",N),p.removeEventListener("message",S)}};A()})})}var rn,Ar;function Ao(){if(Ar)return rn;Ar=1;function r(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var i=0;i<n.length;i++){var o=n.charAt(i),s=o.charCodeAt(0);if(e[s]!==255)throw new TypeError(o+" is ambiguous");e[s]=i}var a=n.length,l=n.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var E=0,N=0,S=0,m=g.length;S!==m&&g[S]===0;)S++,E++;for(var b=(m-S)*u+1>>>0,A=new Uint8Array(b);S!==m;){for(var M=g[S],f=0,_=b-1;(M!==0||f<N)&&_!==-1;_--,f++)M+=256*A[_]>>>0,A[_]=M%a>>>0,M=M/a>>>0;if(M!==0)throw new Error("Non-zero carry");N=f,S++}for(var w=b-N;w!==b&&A[w]===0;)w++;for(var y=l.repeat(E);w<b;++w)y+=n.charAt(A[w]);return y}function p(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;for(var E=0,N=0,S=0;g[E]===l;)N++,E++;for(var m=(g.length-E)*c+1>>>0,b=new Uint8Array(m);g[E];){var A=g.charCodeAt(E);if(A>255)return;var M=e[A];if(M===255)return;for(var f=0,_=m-1;(M!==0||f<S)&&_!==-1;_--,f++)M+=a*b[_]>>>0,b[_]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");S=f,E++}for(var w=m-S;w!==m&&b[w]===0;)w++;for(var y=new Uint8Array(N+(m-w)),W=N;w!==m;)y[W++]=b[w++];return y}function v(g){var E=p(g);if(E)return E;throw new Error("Non-base"+a+" character")}return{encode:h,decodeUnsafe:p,decode:v}}return rn=r,rn}var on,Mr;function Mo(){return Mr||(Mr=1,on=Ao()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),on}var To=Mo();const Co=kr(To);function sn(r,n){var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&n.indexOf(t)<0&&(e[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(r);i<t.length;i++)n.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(r,t[i])&&(e[t[i]]=r[t[i]]);return e}function rt(r,n,e,t){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(u){try{c(t.next(u))}catch(h){s(h)}}function l(u){try{c(t.throw(u))}catch(h){s(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((t=t.apply(r,[])).next())})}function Xr(r){return window.btoa(String.fromCharCode.call(null,...r))}function an(r){return new Uint8Array(window.atob(r).split("").map(n=>n.charCodeAt(0)))}function Tr(r){const n="version"in r?r.serialize():r.serialize({requireAllSignatures:!1,verifySignatures:!1});return Xr(n)}function Ro(r){const e=r[0]*li+1;return zr.deserializeMessageVersion(r.slice(e,r.length))==="legacy"?yt.from(r):xe.deserialize(r)}function Wo(r,n){return rt(this,void 0,void 0,function*(){return yield So(t=>r(Io(t)),n)})}function Io(r){return new Proxy({},{get(n,e){if(n[e]==null)switch(e){case"signAndSendTransactions":n[e]=function(t){var{minContextSlot:i,commitment:o,skipPreflight:s,maxRetries:a,waitForCommitmentToSendNextTransaction:l,transactions:c}=t,u=sn(t,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return rt(this,void 0,void 0,function*(){const h=c.map(Tr),p={min_context_slot:i,commitment:o,skip_preflight:s,max_retries:a,wait_for_commitment_to_send_next_transaction:l},{signatures:v}=yield r.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},u),Object.values(p).some(E=>E!=null)?{options:p}:null),{payloads:h}));return v.map(an).map(Co.encode)})};break;case"signMessages":n[e]=function(t){var{payloads:i}=t,o=sn(t,["payloads"]);return rt(this,void 0,void 0,function*(){const s=i.map(Xr),{signed_payloads:a}=yield r.signMessages(Object.assign(Object.assign({},o),{payloads:s}));return a.map(an)})};break;case"signTransactions":n[e]=function(t){var{transactions:i}=t,o=sn(t,["transactions"]);return rt(this,void 0,void 0,function*(){const s=i.map(Tr),{signed_payloads:a}=yield r.signTransactions(Object.assign(Object.assign({},o),{payloads:s}));return a.map(an).map(Ro)})};break;default:{n[e]=r[e];break}}return n[e]},defineProperty(){return!1},deleteProperty(){return!1}})}var ln,Cr;function No(){if(Cr)return ln;Cr=1;function r(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var i=0;i<n.length;i++){var o=n.charAt(i),s=o.charCodeAt(0);if(e[s]!==255)throw new TypeError(o+" is ambiguous");e[s]=i}var a=n.length,l=n.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var E=0,N=0,S=0,m=g.length;S!==m&&g[S]===0;)S++,E++;for(var b=(m-S)*u+1>>>0,A=new Uint8Array(b);S!==m;){for(var M=g[S],f=0,_=b-1;(M!==0||f<N)&&_!==-1;_--,f++)M+=256*A[_]>>>0,A[_]=M%a>>>0,M=M/a>>>0;if(M!==0)throw new Error("Non-zero carry");N=f,S++}for(var w=b-N;w!==b&&A[w]===0;)w++;for(var y=l.repeat(E);w<b;++w)y+=n.charAt(A[w]);return y}function p(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;for(var E=0,N=0,S=0;g[E]===l;)N++,E++;for(var m=(g.length-E)*c+1>>>0,b=new Uint8Array(m);g[E];){var A=g.charCodeAt(E);if(A>255)return;var M=e[A];if(M===255)return;for(var f=0,_=m-1;(M!==0||f<S)&&_!==-1;_--,f++)M+=a*b[_]>>>0,b[_]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");S=f,E++}for(var w=m-S;w!==m&&b[w]===0;)w++;for(var y=new Uint8Array(N+(m-w)),W=N;w!==m;)y[W++]=b[w++];return y}function v(g){var E=p(g);if(E)return E;throw new Error("Non-base"+a+" character")}return{encode:h,decodeUnsafe:p,decode:v}}return ln=r,ln}var cn,Rr;function Lo(){return Rr||(Rr=1,cn=No()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),cn}var Oo=Lo();const Wr=kr(Oo);function x(r,n,e,t){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(u){try{c(t.next(u))}catch(h){s(h)}}function l(u){try{c(t.throw(u))}catch(h){s(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((t=t.apply(r,[])).next())})}function d(r,n,e,t){if(e==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?r!==n||!t:!n.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?t:e==="a"?t.call(r):t?t.value:n.get(r)}function K(r,n,e,t,i){if(typeof n=="function"?r!==n||!0:!n.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n.set(r,e),e}var Ve,$,be,Ne,ei,ti,ni,it;const Bo=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,Po=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,Uo=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class Do{constructor(){Ve.add(this),$.set(this,null),be.set(this,{}),Ne.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),d(this,Ve,"m",ti).call(this),d(this,$,"f")&&(d(this,$,"f").style.display="flex")},this.close=(n=void 0)=>{var e;console.debug("Modal close"),d(this,Ve,"m",ni).call(this),d(this,$,"f")&&(d(this,$,"f").style.display="none"),(e=d(this,be,"f").close)===null||e===void 0||e.forEach(t=>t(n))},it.set(this,n=>{n.key==="Escape"&&this.close(n)}),this.init=this.init.bind(this),K(this,$,document.getElementById("mobile-wallet-adapter-embedded-root-ui"))}init(){return x(this,void 0,void 0,function*(){console.log("Injecting modal"),d(this,Ve,"m",ei).call(this)})}addEventListener(n,e){var t;return!((t=d(this,be,"f")[n])===null||t===void 0)&&t.push(e)||(d(this,be,"f")[n]=[e]),()=>this.removeEventListener(n,e)}removeEventListener(n,e){var t;d(this,be,"f")[n]=(t=d(this,be,"f")[n])===null||t===void 0?void 0:t.filter(i=>e!==i)}}$=new WeakMap,be=new WeakMap,Ne=new WeakMap,it=new WeakMap,Ve=new WeakSet,ei=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){d(this,$,"f")||K(this,$,document.getElementById("mobile-wallet-adapter-embedded-root-ui"));return}K(this,$,document.createElement("div")),d(this,$,"f").id="mobile-wallet-adapter-embedded-root-ui",d(this,$,"f").innerHTML=Bo,d(this,$,"f").style.display="none";const n=d(this,$,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");n&&(n.innerHTML=this.contentHtml);const e=document.createElement("style");e.id="mobile-wallet-adapter-embedded-modal-styles",e.textContent=Po+this.contentStyles;const t=document.createElement("div");t.innerHTML=Uo,this.dom=t.attachShadow({mode:"closed"}),this.dom.appendChild(e),this.dom.appendChild(d(this,$,"f")),document.body.appendChild(t)},ti=function(){if(!d(this,$,"f")||d(this,Ne,"f"))return;[...d(this,$,"f").querySelectorAll("[data-modal-close]")].forEach(e=>e==null?void 0:e.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",d(this,it,"f")),K(this,Ne,!0)},ni=function(){if(!d(this,Ne,"f")||(window.removeEventListener("load",this.close),document.removeEventListener("keydown",d(this,it,"f")),!d(this,$,"f")))return;[...d(this,$,"f").querySelectorAll("[data-modal-close]")].forEach(e=>e==null?void 0:e.removeEventListener("click",this.close)),K(this,Ne,!1)};const ko="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=";function zo(r){return"version"in r}function xo(r){return window.btoa(String.fromCharCode.call(null,...r))}function nt(r){return new Uint8Array(window.atob(r).split("").map(n=>n.charCodeAt(0)))}var Le,Se,pn,yn,bn,vn,$e,Q,ae,ge,Oe,Be,ot,He,st,En,at,ri,_n,lt,Pe,Sn,Ge,ct,Ue,Ye,ut,An,Mn,dt,Tn,Cn,Rn,ft;const jo="Mobile Wallet Adapter",Fo=64,Ko=[X,F,me,Te];class qo{constructor(n){Le.add(this),Se.set(this,{}),pn.set(this,"1.0.0"),yn.set(this,jo),bn.set(this,"https://solanamobile.com/wallets"),vn.set(this,ko),$e.set(this,void 0),Q.set(this,void 0),ae.set(this,void 0),ge.set(this,!1),Oe.set(this,0),Be.set(this,[]),ot.set(this,void 0),He.set(this,void 0),st.set(this,void 0),En.set(this,(e,t)=>{var i;return!((i=d(this,Se,"f")[e])===null||i===void 0)&&i.push(t)||(d(this,Se,"f")[e]=[t]),()=>d(this,Le,"m",ri).call(this,e,t)}),_n.set(this,({silent:e}={})=>x(this,void 0,void 0,function*(){if(d(this,ge,"f")||this.connected)return{accounts:this.accounts};K(this,ge,!0);try{if(e){const t=yield d(this,ae,"f").get();if(t)yield d(this,Pe,"f").call(this,t);else return{accounts:this.accounts}}else yield d(this,lt,"f").call(this)}catch(t){throw new Error(t instanceof Error&&t.message||"Unknown error")}finally{K(this,ge,!1)}return{accounts:this.accounts}})),lt.set(this,e=>x(this,void 0,void 0,function*(){try{const t=yield d(this,ae,"f").get();if(t)return d(this,Pe,"f").call(this,t),t;const i=yield d(this,ot,"f").select(d(this,Be,"f"));return yield d(this,Ue,"f").call(this,o=>x(this,void 0,void 0,function*(){const[s,a]=yield Promise.all([o.getCapabilities(),o.authorize({chain:i,identity:d(this,$e,"f"),sign_in_payload:e})]),l=d(this,ut,"f").call(this,a.accounts),c=Object.assign(Object.assign({},a),{accounts:l,chain:i});return Promise.all([d(this,Sn,"f").call(this,s),d(this,ae,"f").set(c),d(this,Pe,"f").call(this,c)]),c}))}catch(t){throw new Error(t instanceof Error&&t.message||"Unknown error")}})),Pe.set(this,e=>x(this,void 0,void 0,function*(){var t;const i=d(this,Q,"f")==null||((t=d(this,Q,"f"))===null||t===void 0?void 0:t.accounts.length)!==e.accounts.length||d(this,Q,"f").accounts.some((o,s)=>o.address!==e.accounts[s].address);K(this,Q,e),i&&d(this,Le,"m",at).call(this,"change",{accounts:this.accounts})})),Sn.set(this,e=>x(this,void 0,void 0,function*(){const t=e.features.includes("solana:signTransactions"),i=e.supports_sign_and_send_transactions,o=X in this.features!==i||F in this.features!==t;K(this,He,Object.assign(Object.assign({},(i||!i&&!t)&&{[X]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:d(this,dt,"f")}}),t&&{[F]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:d(this,Tn,"f")}})),o&&d(this,Le,"m",at).call(this,"change",{features:this.features})})),Ge.set(this,(e,t,i)=>x(this,void 0,void 0,function*(){try{const o=yield e.authorize({auth_token:t,identity:d(this,$e,"f"),chain:i}),s=d(this,ut,"f").call(this,o.accounts),a=Object.assign(Object.assign({},o),{accounts:s,chain:i});Promise.all([d(this,ae,"f").set(a),d(this,Pe,"f").call(this,a)])}catch(o){throw d(this,ct,"f").call(this),new Error(o instanceof Error&&o.message||"Unknown error")}})),ct.set(this,()=>x(this,void 0,void 0,function*(){var e;d(this,ae,"f").clear(),K(this,ge,!1),K(this,Oe,(e=d(this,Oe,"f"),e++,e)),K(this,Q,void 0),d(this,Le,"m",at).call(this,"change",{accounts:this.accounts})})),Ue.set(this,e=>x(this,void 0,void 0,function*(){var t;const i=(t=d(this,Q,"f"))===null||t===void 0?void 0:t.wallet_uri_base,o=i?{baseUri:i}:void 0,s=d(this,Oe,"f");try{return yield Wo(e,o)}catch(a){throw d(this,Oe,"f")!==s&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield d(this,st,"f").call(this,this)),a}})),Ye.set(this,()=>{if(!d(this,Q,"f"))throw new Error("Wallet not connected");return{authToken:d(this,Q,"f").auth_token,chain:d(this,Q,"f").chain}}),ut.set(this,e=>e.map(t=>{var i,o;const s=nt(t.address);return{address:Wr.encode(s),publicKey:s,label:t.label,icon:t.icon,chains:(i=t.chains)!==null&&i!==void 0?i:d(this,Be,"f"),features:(o=t.features)!==null&&o!==void 0?o:Ko}})),An.set(this,e=>x(this,void 0,void 0,function*(){const{authToken:t,chain:i}=d(this,Ye,"f").call(this);try{return yield d(this,Ue,"f").call(this,o=>x(this,void 0,void 0,function*(){return yield d(this,Ge,"f").call(this,o,t,i),yield o.signTransactions({transactions:e})}))}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}})),Mn.set(this,(e,t)=>x(this,void 0,void 0,function*(){const{authToken:i,chain:o}=d(this,Ye,"f").call(this);try{return yield d(this,Ue,"f").call(this,s=>x(this,void 0,void 0,function*(){const[a,l]=yield Promise.all([s.getCapabilities(),d(this,Ge,"f").call(this,s,i,o)]);if(a.supports_sign_and_send_transactions)return(yield s.signAndSendTransactions(Object.assign(Object.assign({},t),{transactions:[e]})))[0];throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(s){throw new Error(s instanceof Error&&s.message||"Unknown error")}})),dt.set(this,(...e)=>x(this,void 0,void 0,function*(){const t=[];for(const i of e){const o=xe.deserialize(i.transaction),s=yield d(this,Mn,"f").call(this,o,i.options);t.push({signature:Wr.decode(s)})}return t})),Tn.set(this,(...e)=>x(this,void 0,void 0,function*(){const t=e.map(({transaction:o})=>xe.deserialize(o));return(yield d(this,An,"f").call(this,t)).map(o=>({signedTransaction:zo(o)?o.serialize():new Uint8Array(o.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))})),Cn.set(this,(...e)=>x(this,void 0,void 0,function*(){const{authToken:t,chain:i}=d(this,Ye,"f").call(this),o=e.map(({account:a})=>xo(a.publicKey)),s=e.map(({message:a})=>a);try{return yield d(this,Ue,"f").call(this,a=>x(this,void 0,void 0,function*(){return yield d(this,Ge,"f").call(this,a,t,i),(yield a.signMessages({addresses:o,payloads:s})).map(c=>({signedMessage:c,signature:c.slice(-Fo)}))}))}catch(a){throw new Error(a instanceof Error&&a.message||"Unknown error")}})),Rn.set(this,(...e)=>x(this,void 0,void 0,function*(){const t=[];if(e.length>1)for(const i of e)t.push(yield d(this,ft,"f").call(this,i));else return[yield d(this,ft,"f").call(this,e[0])];return t})),ft.set(this,e=>x(this,void 0,void 0,function*(){var t,i;K(this,ge,!0);try{const o=yield d(this,lt,"f").call(this,Object.assign(Object.assign({},e),{domain:(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:window.location.host}));if(!o.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const s=o.sign_in_result.address;return{account:Object.assign(Object.assign({},(i=o.accounts.find(l=>l.address==s))!==null&&i!==void 0?i:{address:s}),{publicKey:nt(s)}),signedMessage:nt(o.sign_in_result.signed_message),signature:nt(o.sign_in_result.signature)}}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}finally{K(this,ge,!1)}})),K(this,ae,n.authorizationCache),K(this,$e,n.appIdentity),K(this,Be,n.chains),K(this,ot,n.chainSelector),K(this,st,n.onWalletNotFound),K(this,He,{[X]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:d(this,dt,"f")}})}get version(){return d(this,pn,"f")}get name(){return d(this,yn,"f")}get url(){return d(this,bn,"f")}get icon(){return d(this,vn,"f")}get chains(){return d(this,Be,"f")}get features(){return Object.assign({[Un]:{version:"1.0.0",connect:d(this,_n,"f")},[hn]:{version:"1.0.0",disconnect:d(this,ct,"f")},[Dn]:{version:"1.0.0",on:d(this,En,"f")},[me]:{version:"1.0.0",signMessage:d(this,Cn,"f")},[Te]:{version:"1.0.0",signIn:d(this,Rn,"f")}},d(this,He,"f"))}get accounts(){var n,e;return(e=(n=d(this,Q,"f"))===null||n===void 0?void 0:n.accounts)!==null&&e!==void 0?e:[]}get connected(){return!!d(this,Q,"f")}get isAuthorized(){return!!d(this,Q,"f")}get currentAuthorization(){return d(this,Q,"f")}get cachedAuthorizationResult(){return d(this,ae,"f").get()}}Se=new WeakMap,pn=new WeakMap,yn=new WeakMap,bn=new WeakMap,vn=new WeakMap,$e=new WeakMap,Q=new WeakMap,ae=new WeakMap,ge=new WeakMap,Oe=new WeakMap,Be=new WeakMap,ot=new WeakMap,He=new WeakMap,st=new WeakMap,En=new WeakMap,_n=new WeakMap,lt=new WeakMap,Pe=new WeakMap,Sn=new WeakMap,Ge=new WeakMap,ct=new WeakMap,Ue=new WeakMap,Ye=new WeakMap,ut=new WeakMap,An=new WeakMap,Mn=new WeakMap,dt=new WeakMap,Tn=new WeakMap,Cn=new WeakMap,Rn=new WeakMap,ft=new WeakMap,Le=new WeakSet,at=function(n,...e){var t;(t=d(this,Se,"f")[n])===null||t===void 0||t.forEach(i=>i.apply(null,e))},ri=function(n,e){var t;d(this,Se,"f")[n]=(t=d(this,Se,"f")[n])===null||t===void 0?void 0:t.filter(i=>e!==i)};const Vo="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",$o="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.";class Ho extends Do{constructor(){super(...arguments),this.contentStyles=Yo,this.contentHtml=Go}initWithError(n){super.init(),this.populateError(n)}populateError(n){var e,t;const i=(e=this.dom)===null||e===void 0?void 0:e.getElementById("mobile-wallet-adapter-error-message"),o=(t=this.dom)===null||t===void 0?void 0:t.getElementById("mobile-wallet-adapter-error-action");if(i){if(n.name==="SolanaMobileWalletAdapterError")switch(n.code){case"ERROR_WALLET_NOT_FOUND":i.innerHTML=Vo,o&&o.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":i.innerHTML=$o,o&&(o.style.display="none");return}i.innerHTML=`An unexpected error occurred: ${n.message}`}else console.log("Failed to locate error dialog element")}}const Go=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,Yo=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`;function Jo(){return x(this,void 0,void 0,function*(){if(typeof window<"u"){const r=window.navigator.userAgent.toLowerCase(),n=new Ho;r.includes("wv")?n.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):n.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),n.open()}})}const un="SolanaMobileWalletAdapterDefaultAuthorizationCache";function Qo(){let r;try{r=window.localStorage}catch{}return{clear(){return x(this,void 0,void 0,function*(){if(r)try{r.removeItem(un)}catch{}})},get(){return x(this,void 0,void 0,function*(){if(r)try{const n=JSON.parse(r.getItem(un));if(n&&n.accounts){const e=n.accounts.map(t=>Object.assign(Object.assign({},t),{publicKey:"publicKey"in t?new Uint8Array(Object.values(t.publicKey)):new xn(t.address).toBytes()}));return Object.assign(Object.assign({},n),{accounts:e})}else return n||void 0}catch{}})},set(n){return x(this,void 0,void 0,function*(){if(r)try{r.setItem(un,JSON.stringify(n))}catch{}})}}}function Zo(){return{select(r){return x(this,void 0,void 0,function*(){return r.length===1?r[0]:r.includes(vt)?vt:r[0]})}}}function k(r,n,e,t){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(u){try{c(t.next(u))}catch(h){s(h)}}function l(u){try{c(t.throw(u))}catch(h){s(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((t=t.apply(r,[])).next())})}function L(r,n,e,t){if(e==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?r!==n||!t:!n.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?t:e==="a"?t.call(r):t?t.value:n.get(r)}function ee(r,n,e,t,i){if(typeof n=="function"?r!==n||!0:!n.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n.set(r,e),e}const Wn="standard:connect",Xo="standard:disconnect",es="standard:events";function dn(r){return window.btoa(String.fromCharCode.call(null,...r))}function ts(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}var G,j,pe,ce,ht,le,ve,In,Nn,ii,_t,gt,we;const wt="Mobile Wallet Adapter",ns=64;function rs(r){return"version"in r}function oi(r){switch(r){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return r}}class is extends ci{constructor(n,e){super(),G.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),j.set(this,void 0),pe.set(this,!1),ce.set(this,ts()?H.Loadable:H.Unsupported),ht.set(this,void 0),le.set(this,void 0),ve.set(this,void 0),In.set(this,t=>k(this,void 0,void 0,function*(){if(t.accounts&&t.accounts.length>0){L(this,G,"m",ii).call(this);const i=yield L(this,ht,"f").call(this,t.accounts);i!==L(this,le,"f")&&(ee(this,le,i),ee(this,ve,void 0),this.emit("connect",this.publicKey))}})),ee(this,ht,t=>k(this,void 0,void 0,function*(){var i;const o=yield e.addressSelector.select(t.map(({publicKey:s})=>dn(s)));return(i=t.find(({publicKey:s})=>dn(s)===o))!==null&&i!==void 0?i:t[0]})),ee(this,j,n),L(this,j,"f").features[es].on("change",L(this,In,"f")),this.name=L(this,j,"f").name,this.icon=L(this,j,"f").icon,this.url=L(this,j,"f").url}get publicKey(){var n;if(!L(this,ve,"f")&&L(this,le,"f"))try{ee(this,ve,new xn(L(this,le,"f").publicKey),"f")}catch(e){throw new xr(e instanceof Error&&(e==null?void 0:e.message)||"Unknown error",e)}return(n=L(this,ve,"f"))!==null&&n!==void 0?n:null}get connected(){return L(this,j,"f").connected}get connecting(){return L(this,pe,"f")}get readyState(){return L(this,ce,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return k(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return k(this,void 0,void 0,function*(){L(this,G,"m",Nn).call(this,!0)})}connect(){return k(this,void 0,void 0,function*(){L(this,G,"m",Nn).call(this)})}performAuthorization(n){return k(this,void 0,void 0,function*(){try{const e=yield L(this,j,"f").cachedAuthorizationResult;return e?(yield L(this,j,"f").features[Wn].connect({silent:!0}),e):(n?yield L(this,j,"f").features[Te].signIn(n):yield L(this,j,"f").features[Wn].connect(),yield yield L(this,j,"f").cachedAuthorizationResult)}catch(e){throw new bt(e instanceof Error&&e.message||"Unknown error",e)}})}disconnect(){return k(this,void 0,void 0,function*(){return yield L(this,G,"m",we).call(this,()=>k(this,void 0,void 0,function*(){ee(this,pe,!1),ee(this,ve,void 0),ee(this,le,void 0),yield L(this,j,"f").features[Xo].disconnect(),this.emit("disconnect")}))})}signIn(n){return k(this,void 0,void 0,function*(){return L(this,G,"m",we).call(this,()=>k(this,void 0,void 0,function*(){var e;if(L(this,ce,"f")!==H.Installed&&L(this,ce,"f")!==H.Loadable)throw new Xe;ee(this,pe,!0);try{const t=yield L(this,j,"f").features[Te].signIn(Object.assign(Object.assign({},n),{domain:(e=n==null?void 0:n.domain)!==null&&e!==void 0?e:window.location.host}));if(t.length>0)return t[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(t){throw new bt(t instanceof Error&&t.message||"Unknown error",t)}finally{ee(this,pe,!1)}}))})}signMessage(n){return k(this,void 0,void 0,function*(){return yield L(this,G,"m",we).call(this,()=>k(this,void 0,void 0,function*(){const e=L(this,G,"m",_t).call(this);try{return(yield L(this,j,"f").features[me].signMessage({account:e,message:n}))[0].signature}catch(t){throw new jr(t==null?void 0:t.message,t)}}))})}sendTransaction(n,e,t){return k(this,void 0,void 0,function*(){return yield L(this,G,"m",we).call(this,()=>k(this,void 0,void 0,function*(){const i=L(this,G,"m",_t).call(this);try{let o=function(){let s;switch(e.commitment){case"confirmed":case"finalized":case"processed":s=e.commitment;break;default:s="finalized"}let a;switch(t==null?void 0:t.preflightCommitment){case"confirmed":case"finalized":case"processed":a=t.preflightCommitment;break;case void 0:a=s;break;default:a="finalized"}return(a==="finalized"?2:a==="confirmed"?1:0)<(s==="finalized"?2:s==="confirmed"?1:0)?a:s};if(X in L(this,j,"f").features){const s=oi(L(this,j,"f").currentAuthorization.chain),[a]=(yield L(this,j,"f").features[X].signAndSendTransaction({account:i,transaction:n.serialize(),chain:s,options:t?{skipPreflight:t.skipPreflight,maxRetries:t.maxRetries}:void 0})).map(l=>dn(l.signature));return a}else{const[s]=yield L(this,G,"m",gt).call(this,[n]);if(rs(s))return yield e.sendTransaction(s);{const a=s.serialize();return yield e.sendRawTransaction(a,Object.assign(Object.assign({},t),{preflightCommitment:o()}))}}}catch(o){throw new gn(o==null?void 0:o.message,o)}}))})}signTransaction(n){return k(this,void 0,void 0,function*(){return yield L(this,G,"m",we).call(this,()=>k(this,void 0,void 0,function*(){const[e]=yield L(this,G,"m",gt).call(this,[n]);return e}))})}signAllTransactions(n){return k(this,void 0,void 0,function*(){return yield L(this,G,"m",we).call(this,()=>k(this,void 0,void 0,function*(){return yield L(this,G,"m",gt).call(this,n)}))})}}j=new WeakMap,pe=new WeakMap,ce=new WeakMap,ht=new WeakMap,le=new WeakMap,ve=new WeakMap,In=new WeakMap,G=new WeakSet,Nn=function(n=!1){return k(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield L(this,G,"m",we).call(this,()=>k(this,void 0,void 0,function*(){if(L(this,ce,"f")!==H.Installed&&L(this,ce,"f")!==H.Loadable)throw new Xe;ee(this,pe,!0);try{yield L(this,j,"f").features[Wn].connect({silent:n})}catch(e){throw new bt(e instanceof Error&&e.message||"Unknown error",e)}finally{ee(this,pe,!1)}}))})},ii=function(){L(this,ce,"f")!==H.Installed&&this.emit("readyStateChange",ee(this,ce,H.Installed))},_t=function(){if(!L(this,j,"f").isAuthorized||!L(this,le,"f"))throw new ue;return L(this,le,"f")},gt=function(n){return k(this,void 0,void 0,function*(){const e=L(this,G,"m",_t).call(this);try{if(F in L(this,j,"f").features)return L(this,j,"f").features[F].signTransaction(...n.map(t=>({account:e,transaction:t.serialize()}))).then(t=>t.map(i=>{const o=i.signedTransaction,a=o[0]*ns+1;return zr.deserializeMessageVersion(o.slice(a,o.length))==="legacy"?yt.from(o):xe.deserialize(o)}));throw new Error("Connected wallet does not support signing transactions")}catch(t){throw new wn(t==null?void 0:t.message,t)}})},we=function(n){return k(this,void 0,void 0,function*(){try{return yield n()}catch(e){throw this.emit("error",e),e}})};class os extends is{constructor(n){var e;const t=oi((e=n.chain)!==null&&e!==void 0?e:n.cluster);super(new qo({appIdentity:n.appIdentity,authorizationCache:{set:n.authorizationResultCache.set,get:()=>k(this,void 0,void 0,function*(){const i=yield n.authorizationResultCache.get();return i&&"chain"in i?i:i?Object.assign(Object.assign({},i),{chain:t}):void 0}),clear:n.authorizationResultCache.clear},chains:[t],chainSelector:Zo(),onWalletNotFound:()=>k(this,void 0,void 0,function*(){n.onWalletNotFound(this)})}),{addressSelector:n.addressSelector,chain:t})}}class ss extends os{}function as(){return{select(r){return k(this,void 0,void 0,function*(){return r[0]})}}}function ls(){return Qo()}function cs(r){return k(this,void 0,void 0,function*(){return Jo()})}function us(){return cs}function ds(r,n){if(r===n)return!0;const e=r.length;if(e!==n.length)return!1;for(let t=0;t<e;t++)if(r[t]!==n[t])return!1;return!0}var T=function(r,n,e,t){if(e==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?r!==n||!t:!n.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?t:e==="a"?t.call(r):t?t.value:n.get(r)},q=function(r,n,e,t,i){if(t==="m")throw new TypeError("Private method is not writable");if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?r!==n||!i:!n.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t==="a"?i.call(r,e):i?i.value=e:n.set(r,e),e},Y,Z,Ae,Me,Ee,Je,St,D,At,Ln,mt,On,Qe,Bn,Ir,Nr,Lr,Or;class fs extends ui{get name(){return T(this,D,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return T(this,D,"f").icon}get readyState(){return T(this,At,"f")}get publicKey(){return T(this,Ae,"f")}get connecting(){return T(this,Me,"f")}get supportedTransactionVersions(){return T(this,St,"f")}get wallet(){return T(this,D,"f")}get standard(){return!0}constructor({wallet:n}){super(),Y.add(this),Z.set(this,void 0),Ae.set(this,void 0),Me.set(this,void 0),Ee.set(this,void 0),Je.set(this,void 0),St.set(this,void 0),D.set(this,void 0),At.set(this,typeof window>"u"||typeof document>"u"?H.Unsupported:H.Installed),Bn.set(this,e=>{if("accounts"in e){const t=T(this,D,"f").accounts[0];T(this,Z,"f")&&!T(this,Ee,"f")&&t!==T(this,Z,"f")&&(t?T(this,Y,"m",mt).call(this,t):(this.emit("error",new di),T(this,Y,"m",On).call(this)))}"features"in e&&T(this,Y,"m",Qe).call(this)}),q(this,D,n,"f"),q(this,Z,null,"f"),q(this,Ae,null,"f"),q(this,Me,!1,"f"),q(this,Ee,!1,"f"),q(this,Je,T(this,D,"f").features[Dn].on("change",T(this,Bn,"f")),"f"),T(this,Y,"m",Qe).call(this)}destroy(){q(this,Z,null,"f"),q(this,Ae,null,"f"),q(this,Me,!1,"f"),q(this,Ee,!1,"f");const n=T(this,Je,"f");n&&(q(this,Je,null,"f"),n())}async autoConnect(){return T(this,Y,"m",Ln).call(this,{silent:!0})}async connect(){return T(this,Y,"m",Ln).call(this)}async disconnect(){if(hn in T(this,D,"f").features)try{q(this,Ee,!0,"f"),await T(this,D,"f").features[hn].disconnect()}catch(n){this.emit("error",new fi(n==null?void 0:n.message,n))}finally{q(this,Ee,!1,"f")}T(this,Y,"m",On).call(this)}async sendTransaction(n,e,t={}){try{const i=T(this,Z,"f");if(!i)throw new ue;let o;if(X in T(this,D,"f").features)if(i.features.includes(X))o=X;else if(F in T(this,D,"f").features&&i.features.includes(F))o=F;else throw new De;else if(F in T(this,D,"f").features){if(!i.features.includes(F))throw new De;o=F}else throw new Ke;const s=qi(e.rpcEndpoint);if(!i.chains.includes(s))throw new gn;try{const{signers:a,...l}=t;let c;if(qe(n)?(a!=null&&a.length&&n.sign(a),c=n.serialize()):(n=await this.prepareTransaction(n,e,l),a!=null&&a.length&&n.partialSign(...a),c=new Uint8Array(n.serialize({requireAllSignatures:!1,verifySignatures:!1}))),o===X){const[u]=await T(this,D,"f").features[X].signAndSendTransaction({account:i,chain:s,transaction:c,options:{preflightCommitment:Xt(l.preflightCommitment||e.commitment),skipPreflight:l.skipPreflight,maxRetries:l.maxRetries,minContextSlot:l.minContextSlot}});return hi.encode(u.signature)}else{const[u]=await T(this,D,"f").features[F].signTransaction({account:i,chain:s,transaction:c,options:{preflightCommitment:Xt(l.preflightCommitment||e.commitment),minContextSlot:l.minContextSlot}});return await e.sendRawTransaction(u.signedTransaction,{...l,preflightCommitment:Xt(l.preflightCommitment||e.commitment)})}}catch(a){throw a instanceof zn?a:new gn(a==null?void 0:a.message,a)}}catch(i){throw this.emit("error",i),i}}}Z=new WeakMap,Ae=new WeakMap,Me=new WeakMap,Ee=new WeakMap,Je=new WeakMap,St=new WeakMap,D=new WeakMap,At=new WeakMap,Bn=new WeakMap,Y=new WeakSet,Ln=async function(n){try{if(this.connected||this.connecting)return;if(T(this,At,"f")!==H.Installed)throw new Xe;if(q(this,Me,!0,"f"),!T(this,D,"f").accounts.length)try{await T(this,D,"f").features[Un].connect(n)}catch(t){throw new bt(t==null?void 0:t.message,t)}const e=T(this,D,"f").accounts[0];if(!e)throw new De;T(this,Y,"m",mt).call(this,e)}catch(e){throw this.emit("error",e),e}finally{q(this,Me,!1,"f")}},mt=function(n){let e;try{e=new xn(n.address)}catch(t){throw new xr(t==null?void 0:t.message,t)}q(this,Z,n,"f"),q(this,Ae,e,"f"),T(this,Y,"m",Qe).call(this),this.emit("connect",e)},On=function(){q(this,Z,null,"f"),q(this,Ae,null,"f"),T(this,Y,"m",Qe).call(this),this.emit("disconnect")},Qe=function(){var e,t;const n=X in T(this,D,"f").features?T(this,D,"f").features[X].supportedTransactionVersions:T(this,D,"f").features[F].supportedTransactionVersions;q(this,St,ds(n,["legacy"])?null:new Set(n),"f"),F in T(this,D,"f").features&&((e=T(this,Z,"f"))!=null&&e.features.includes(F))?(this.signTransaction=T(this,Y,"m",Ir),this.signAllTransactions=T(this,Y,"m",Nr)):(delete this.signTransaction,delete this.signAllTransactions),me in T(this,D,"f").features&&((t=T(this,Z,"f"))!=null&&t.features.includes(me))?this.signMessage=T(this,Y,"m",Lr):delete this.signMessage,Te in T(this,D,"f").features?this.signIn=T(this,Y,"m",Or):delete this.signIn},Ir=async function(n){try{const e=T(this,Z,"f");if(!e)throw new ue;if(!(F in T(this,D,"f").features))throw new Ke;if(!e.features.includes(F))throw new De;try{const i=(await T(this,D,"f").features[F].signTransaction({account:e,transaction:qe(n)?n.serialize():new Uint8Array(n.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return qe(n)?xe.deserialize(i):yt.from(i)}catch(t){throw t instanceof zn?t:new wn(t==null?void 0:t.message,t)}}catch(e){throw this.emit("error",e),e}},Nr=async function(n){try{const e=T(this,Z,"f");if(!e)throw new ue;if(!(F in T(this,D,"f").features))throw new Ke;if(!e.features.includes(F))throw new De;try{const t=await T(this,D,"f").features[F].signTransaction(...n.map(i=>({account:e,transaction:qe(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return n.map((i,o)=>{const s=t[o].signedTransaction;return qe(i)?xe.deserialize(s):yt.from(s)})}catch(t){throw new wn(t==null?void 0:t.message,t)}}catch(e){throw this.emit("error",e),e}},Lr=async function(n){try{const e=T(this,Z,"f");if(!e)throw new ue;if(!(me in T(this,D,"f").features))throw new Ke;if(!e.features.includes(me))throw new De;try{return(await T(this,D,"f").features[me].signMessage({account:e,message:n}))[0].signature}catch(t){throw new jr(t==null?void 0:t.message,t)}}catch(e){throw this.emit("error",e),e}},Or=async function(n={}){try{if(!(Te in T(this,D,"f").features))throw new Ke;let e;try{[e]=await T(this,D,"f").features[Te].signIn(n)}catch(t){throw new qn(t==null?void 0:t.message,t)}if(!e)throw new qn;return T(this,Y,"m",mt).call(this,e.account),e}catch(e){throw this.emit("error",e),e}};const hs=gi;var gs=function(r,n,e,t){if(e==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?r!==n||!t:!n.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?t:e==="a"?t.call(r):t?t.value:n.get(r)},ws=function(r,n,e,t,i){if(t==="m")throw new TypeError("Private method is not writable");if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?r!==n||!i:!n.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t==="a"?i.call(r,e):i?i.value=e:n.set(r,e),e},pt;let te;const Tt=new Set;function ms(r){Ze=void 0,Tt.add(r)}function ps(r){Ze=void 0,Tt.delete(r)}const ke={};function ys(){if(te||(te=Object.freeze({register:Br,get:bs,on:vs}),typeof window>"u"))return te;const r=Object.freeze({register:Br});try{window.addEventListener("wallet-standard:register-wallet",({detail:n})=>n(r))}catch(n){console.error(`wallet-standard:register-wallet event listener could not be added
`,n)}try{window.dispatchEvent(new Es(r))}catch(n){console.error(`wallet-standard:app-ready event could not be dispatched
`,n)}return te}function Br(...r){var n;return r=r.filter(e=>!Tt.has(e)),r.length?(r.forEach(e=>ms(e)),(n=ke.register)==null||n.forEach(e=>Pn(()=>e(...r))),function(){var t;r.forEach(i=>ps(i)),(t=ke.unregister)==null||t.forEach(i=>Pn(()=>i(...r)))}):()=>{}}let Ze;function bs(){return Ze||(Ze=[...Tt]),Ze}function vs(r,n){var e;return(e=ke[r])!=null&&e.push(n)||(ke[r]=[n]),function(){var i;ke[r]=(i=ke[r])==null?void 0:i.filter(o=>n!==o)}}function Pn(r){try{r()}catch(n){console.error(n)}}class Es extends Event{get detail(){return gs(this,pt,"f")}get type(){return"wallet-standard:app-ready"}constructor(n){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),pt.set(this,void 0),ws(this,pt,n,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}pt=new WeakMap;function _s(){if(te||(te=ys(),typeof window>"u"))return te;const r=window.navigator.wallets||[];if(!Array.isArray(r))return console.error("window.navigator.wallets is not an array"),te;const{register:n}=te,e=(...t)=>t.forEach(i=>Pn(()=>i({register:n})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:e})})}catch{return console.error("window.navigator.wallets could not be set"),te}return e(...r),te}function Ss(r){const n=Pr(()=>new Set),{get:e,on:t}=Pr(()=>_s()),[i,o]=O.useState(()=>Ur(e()));O.useEffect(()=>{const a=[t("register",(...l)=>o(c=>[...c,...Ur(l)])),t("unregister",(...l)=>o(c=>c.filter(u=>l.some(h=>h===u.wallet))))];return()=>a.forEach(l=>l())},[t]);const s=As(i);return O.useEffect(()=>{if(!s)return;const a=new Set(i);new Set(s.filter(c=>!a.has(c))).forEach(c=>c.destroy())},[s,i]),O.useEffect(()=>()=>i.forEach(a=>a.destroy()),[]),O.useMemo(()=>[...i,...r.filter(({name:a})=>i.some(l=>l.name===a)?(n.has(a)||(n.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[i,r,n])}function Pr(r){const n=O.useRef(void 0);return n.current===void 0&&(n.current={value:r()}),n.current.value}function As(r){const n=O.useRef(void 0);return O.useEffect(()=>{n.current=r}),n.current}function Ur(r){return r.filter(hs).map(n=>new fs({wallet:n}))}var ze;(function(r){r[r.DESKTOP_WEB=0]="DESKTOP_WEB",r[r.MOBILE_WEB=1]="MOBILE_WEB"})(ze||(ze={}));function Ms(r){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(r)}function Ts({adapters:r,userAgentString:n}){return r.some(e=>e.name!==wt&&e.readyState===H.Installed)?ze.DESKTOP_WEB:n&&/android/i.test(n)&&!Ms(n)?ze.MOBILE_WEB:ze.DESKTOP_WEB}function Cs(r){return r?/devnet/i.test(r)?"devnet":/testnet/i.test(r)?"testnet":"mainnet-beta":"mainnet-beta"}function Rs({children:r,wallets:n,adapter:e,isUnloadingRef:t,onAutoConnectRequest:i,onConnectError:o,onError:s,onSelectWallet:a}){const l=O.useRef(!1),[c,u]=O.useState(!1),h=O.useRef(!1),[p,v]=O.useState(!1),[g,E]=O.useState(()=>(e==null?void 0:e.publicKey)??null),[N,S]=O.useState(()=>(e==null?void 0:e.connected)??!1),m=O.useRef(s);O.useEffect(()=>(m.current=s,()=>{m.current=void 0}),[s]);const b=O.useRef((P,U)=>(t.current||(m.current?m.current(P,U):(console.error(P,U),P instanceof Xe&&typeof window<"u"&&U&&window.open(U.url,"_blank"))),P)),[A,M]=O.useState(()=>n.map(P=>({adapter:P,readyState:P.readyState})).filter(({readyState:P})=>P!==H.Unsupported));O.useEffect(()=>{M(U=>n.map((z,J)=>{const re=U[J];return re&&re.adapter===z&&re.readyState===z.readyState?re:{adapter:z,readyState:z.readyState}}).filter(({readyState:z})=>z!==H.Unsupported));function P(U){M(z=>{const J=z.findIndex(({adapter:ye})=>ye===this);if(J===-1)return z;const{adapter:re}=z[J];return[...z.slice(0,J),{adapter:re,readyState:U},...z.slice(J+1)].filter(({readyState:ye})=>ye!==H.Unsupported)})}return n.forEach(U=>U.on("readyStateChange",P,U)),()=>{n.forEach(U=>U.off("readyStateChange",P,U))}},[e,n]);const f=O.useMemo(()=>A.find(P=>P.adapter===e)??null,[e,A]);O.useEffect(()=>{if(!e)return;const P=J=>{E(J),l.current=!1,u(!1),S(!0),h.current=!1,v(!1)},U=()=>{t.current||(E(null),l.current=!1,u(!1),S(!1),h.current=!1,v(!1))},z=J=>{b.current(J,e)};return e.on("connect",P),e.on("disconnect",U),e.on("error",z),()=>{e.off("connect",P),e.off("disconnect",U),e.off("error",z),U()}},[e,t]);const _=O.useRef(!1);O.useEffect(()=>()=>{_.current=!1},[e]),O.useEffect(()=>{_.current||l.current||N||!i||!((f==null?void 0:f.readyState)===H.Installed||(f==null?void 0:f.readyState)===H.Loadable)||(l.current=!0,u(!0),_.current=!0,async function(){try{await i()}catch{o()}finally{u(!1),l.current=!1}}())},[N,i,o,f]);const w=O.useCallback(async(P,U,z)=>{if(!e)throw b.current(new Vn);if(!N)throw b.current(new ue,e);return await e.sendTransaction(P,U,z)},[e,N]),y=O.useMemo(()=>e&&"signTransaction"in e?async P=>{if(!N)throw b.current(new ue,e);return await e.signTransaction(P)}:void 0,[e,N]),W=O.useMemo(()=>e&&"signAllTransactions"in e?async P=>{if(!N)throw b.current(new ue,e);return await e.signAllTransactions(P)}:void 0,[e,N]),I=O.useMemo(()=>e&&"signMessage"in e?async P=>{if(!N)throw b.current(new ue,e);return await e.signMessage(P)}:void 0,[e,N]),C=O.useMemo(()=>e&&"signIn"in e?async P=>await e.signIn(P):void 0,[e]),R=O.useCallback(async()=>{if(l.current||h.current||f!=null&&f.adapter.connected)return;if(!f)throw b.current(new Vn);const{adapter:P,readyState:U}=f;if(!(U===H.Installed||U===H.Loadable))throw b.current(new Xe,P);l.current=!0,u(!0);try{await P.connect()}catch(z){throw o(),z}finally{u(!1),l.current=!1}},[o,f]),B=O.useCallback(async()=>{if(!h.current&&e){h.current=!0,v(!0);try{await e.disconnect()}finally{v(!1),h.current=!1}}},[e]);return kn.createElement(Kr.Provider,{value:{autoConnect:!!i,wallets:A,wallet:f,publicKey:g,connected:N,connecting:c,disconnecting:p,select:a,connect:R,disconnect:B,sendTransaction:w,signTransaction:y,signAllTransactions:W,signMessage:I,signIn:C}},r)}let fn;function Ws(){var r;return fn===void 0&&(fn=((r=globalThis.navigator)==null?void 0:r.userAgent)??null),fn}function Dr(r){const n=Ws();return Ts({adapters:r,userAgentString:n})===ze.MOBILE_WEB}function Is(){const r=globalThis.location;if(r)return`${r.protocol}//${r.host}`}function Bs({children:r,wallets:n,autoConnect:e,localStorageKey:t="walletName",onError:i}){const{connection:o}=wi(),s=Ss(n),a=O.useMemo(()=>{if(!Dr(s))return null;const m=s.find(b=>b.name===wt);return m||new ss({addressSelector:as(),appIdentity:{uri:Is()},authorizationResultCache:ls(),cluster:Cs(o==null?void 0:o.rpcEndpoint),onWalletNotFound:us()})},[s,o==null?void 0:o.rpcEndpoint]),l=O.useMemo(()=>a==null||s.indexOf(a)!==-1?s:[a,...s],[s,a]),[c,u]=yi(t,null),h=O.useMemo(()=>l.find(m=>m.name===c)??null,[l,c]),p=O.useCallback(m=>{c!==m&&(h&&h.name!==wt&&h.disconnect(),u(m))},[h,u,c]);O.useEffect(()=>{if(!h)return;function m(){E.current||u(null)}return h.on("disconnect",m),()=>{h.off("disconnect",m)}},[h,s,u,c]);const v=O.useRef(!1),g=O.useMemo(()=>{if(!(!e||!h))return async()=>{(e===!0||await e(h))&&(v.current?await h.connect():await h.autoConnect())}},[e,h]),E=O.useRef(!1);O.useEffect(()=>{if(c===wt&&Dr(s)){E.current=!1;return}function m(){E.current=!0}return window.addEventListener("beforeunload",m),()=>{window.removeEventListener("beforeunload",m)}},[s,c]);const N=O.useCallback(()=>{h&&p(null)},[h,p]),S=O.useCallback(m=>{v.current=!0,p(m)},[p]);return kn.createElement(Rs,{wallets:l,adapter:h,isUnloadingRef:E,onAutoConnectRequest:g,onConnectError:N,onError:i,onSelectWallet:S},r)}export{Fr as ConnectionContext,Ls as ConnectionProvider,Kr as WalletContext,Vn as WalletNotSelectedError,Bs as WalletProvider,Os as useAnchorWallet,wi as useConnection,yi as useLocalStorage,pi as useWallet};
